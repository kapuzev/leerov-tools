#!/bin/bash

###############################################################################
# ГАЙД: Как найти бинарник и добавить его в PATH в .zshrc
###############################################################################

# =============================================================================
# ШАГ 1: Поиск бинарного файла
# =============================================================================

# Способ 1: Поиск по имени приложения (для Mac)
# mdfind "kMDItemDisplayName == 'Имя Приложения'"

# Пример для VS Code:
mdfind "kMDItemDisplayName == 'Visual Studio Code'"

# Способ 2: Рекурсивный поиск по файловой системе
# find /Applications -name "имя_бинарника" -type f 2>/dev/null

# Пример поиска бинарника 'code':
find "/Applications/Visual Studio Code.app" -name "code" -type f 2>/dev/null

# Способ 3: Поиск в стандартных директориях
# ls -la /usr/local/bin/
# ls -la /opt/homebrew/bin/
# ls -la ~/.local/bin/

# =============================================================================
# ШАГ 2: Проверка найденного бинарника
# =============================================================================

# Проверим что файл существует и исполняемый
ls -la "/Applications/Visual Studio Code.app/Contents/Resources/app/bin/code"

# Проверим версию (если поддерживает)
"/Applications/Visual Studio Code.app/Contents/Resources/app/bin/code" --version

# =============================================================================
# ШАГ 3: Добавление в PATH через .zshrc
# =============================================================================

# Способ A: Добавить путь к директории с бинарником
# export PATH="/путь/к/директории:$PATH"

# Пример для VS Code:
export PATH="/Applications/Visual Studio Code.app/Contents/Resources/app/bin:$PATH"

# Способ B: Если нужно добавить несколько путей
# export PATH="/путь/первый:/путь/второй:/путь/третий:$PATH"

# Способ C: Создание символической ссылки (альтернатива)
# mkdir -p ~/.local/bin
# ln -s "/полный/путь/к/бинарнику" ~/.local/bin/имя_команды
# export PATH="$HOME/.local/bin:$PATH"

# =============================================================================
# ШАГ 4: Применение изменений
# =============================================================================

# Открываем .zshrc для редактирования
nano ~/.zshrc

# Добавляем строку с export PATH= в конец файла
# Сохраняем: Ctrl+X → Y → Enter

# Применяем изменения
source ~/.zshrc

# =============================================================================
# ШАГ 5: Проверка результата
# =============================================================================

# Проверяем что команда доступна
which code

# Проверяем PATH
echo $PATH | tr ':' '\n'

# Тестируем команду
code --version

# =============================================================================
# ШАГ 6: Поиск и устранение проблем
# =============================================================================

# Если команда не найдена:
# 1. Проверьте правильность пути
# 2. Убедитесь что файл исполняемый: chmod +x /путь/к/файлу
# 3. Проверьте нет ли опечаток в .zshrc
# 4. Выполните: source ~/.zshrc

# Проверка прав:
ls -la "/Applications/Visual Studio Code.app/Contents/Resources/app/bin/code"

# Если нужно дать права:
chmod +x "/Applications/Visual Studio Code.app/Contents/Resources/app/bin/code"

# =============================================================================
# ПРИМЕРЫ ДЛЯ РАЗНЫХ ПРИЛОЖЕНИЙ
# =============================================================================

# Для Node.js (если установлен через nvm):
# export PATH="$HOME/.nvm/versions/node/v18.17.0/bin:$PATH"

# Для Python (если установлен через pyenv):
# export PATH="$HOME/.pyenv/bin:$PATH"

# Для Homebrew на Apple Silicon Mac:
# export PATH="/opt/homebrew/bin:$PATH"

# Для пользовательских скриптов:
# export PATH="$HOME/bin:$HOME/.local/bin:$PATH"

###############################################################################
# КОНЕЦ ГАЙДА
###############################################################################